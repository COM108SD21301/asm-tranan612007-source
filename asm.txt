#include <stdio.h>
#include <math.h>
#include <stdlib.h>

int main() {
    while (1) {   // Lặp menu
        int luaChon;

        printf("\n========== MENU CHUC NANG ==========\n");
        printf("1. Kiem tra so nguyen\n");
        printf("2. UCLN - BCNN\n");
        printf("3. Tinh tien Karaoke\n");
        printf("4. Tinh tien dien\n");
        printf("0. Thoat chuong trinh\n");
        printf("====================================\n");
        printf("Moi ban nhap lua chon: ");
        scanf("%d", &luaChon);

        switch(luaChon) {

            /* ===== CHỨC NĂNG 1 ===== */
            case 1: {
                char tiepTuc = 'y';
                while(tiepTuc == 'y' || tiepTuc == 'Y') {
                    int x;
                    printf("Nhap so nguyen x: ");
                    scanf("%d", &x);

                    // Kiem tra so chinh phuong
                    if (sqrt(x) == (int)sqrt(x)) 
                        printf("%d la so chinh phuong\n", x);

                    // Kiem tra so nguyen to
                    int nt = 1;
                    if (x < 2) nt = 0;
                    for (int i = 2; i <= sqrt(x); i++) {
                        if (x % i == 0) { nt = 0; break; }
                    }
                    if (nt) printf("%d la so nguyen to\n", x);
                    else printf("%d khong phai so nguyen to\n", x);

                    printf("Ban co muon nhap tiep (y/n)? ");
                    scanf(" %c", &tiepTuc);
                }
                break;
            }

            /* ===== CHỨC NĂNG 2 ===== */
            case 2: {
                char tiepTuc = 'y';
                while(tiepTuc == 'y' || tiepTuc == 'Y') {
                    int x, y;
                    printf("Nhap 2 so nguyen x y: ");
                    scanf("%d %d", &x, &y);

                    if (x == 0 || y == 0) {
                        printf("Khong tinh duoc voi so 0.\n");
                    } else {
                        int a = x, b = y;
                        while (b != 0) {
                            int r = a % b;
                            a = b;
                            b = r;
                        }

                        int UCLN = a;
                        long long BCNN = (long long)x * y / UCLN;

                        printf("UCLN = %d\n", UCLN);
                        printf("BCNN = %lld\n", BCNN);
                    }

                    printf("Ban co muon nhap tiep (y/n)? ");
                    scanf(" %c", &tiepTuc);
                }
                break;
            }

            /* ===== CHỨC NĂNG 3 ===== */
            case 3: {
                char tiepTuc = 'y';
                while(tiepTuc == 'y' || tiepTuc == 'Y') {
                    int gioBD, gioKT;
                    printf("Nhap gio bat dau (12-23): ");
                    scanf("%d", &gioBD);
                    printf("Nhap gio ket thuc (12-23): ");
                    scanf("%d", &gioKT);
                    if (gioBD < 12 || gioBD > 23 || gioKT < 12 || gioKT > 23 || gioKT <= gioBD) {
                        printf("Gio khong hop le!\n");
                    } else {
                        int gioSD = gioKT - gioBD;
                        double tien = 0;
                        if (gioSD <= 3) tien = gioSD * 150000;
                        else tien = 3 * 150000 + (gioSD - 3) * 150000 * 0.7;
                        printf("Tien Karaoke = %.0f VND\n", tien);
                    }

                    printf("Ban co muon nhap tiep (y/n)? ");
                    scanf(" %c", &tiepTuc);
                }
                break;
            }

            /* ===== CHỨC NĂNG 4 ===== */
            case 4: {
                char tiepTuc = 'y';
                while(tiepTuc == 'y' || tiepTuc == 'Y') {
                    double kwh;
                    printf("Nhap so kWh: ");
                    scanf("%lf", &kwh);

                    double tien = 0;
                    if (kwh <= 50) tien = kwh * 1678;
                    else if (kwh <= 100) tien = 50 * 1678 + (kwh - 50) * 1734;
                    else if (kwh <= 200) tien = 50 * 1678 + 50 * 1734 + (kwh - 100) * 2014;
                    else if (kwh <= 300) tien = 50 * 1678 + 50 * 1734 + 100 * 2014 + (kwh - 200) * 2536;
                    else tien = 50 * 1678 + 50 * 1734 + 100 * 2014 + 100 * 2536 + (kwh - 300) * 2834;

                    printf("Tien dien = %.0f VND\n", tien);

                    printf("Ban co muon nhap tiep (y/n)? ");
                    scanf(" %c", &tiepTuc);
                }
                break;
            }

            /* ===== THOÁT ===== */
            case 0:
                printf("Da thoat chuong trinh!\n");
                return 0;

            default:
                printf("Lua chon khong hop le!\n");
        }

        system("pause");
        system("cls");
    }

    return 0;
}